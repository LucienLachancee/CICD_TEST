{% extends "dream_bridge_app/base.html" %}
{% load static %}

{% block title %}Raconter un rêve - Dream Bridge{% endblock %}

{% block content %}
<section class="process-section depth-layer">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8 col-md-10">
                <div class="card card-dream shadow-lg p-4 fade-in-up text-center">
                    <div class="process-icon fs-1">🎙️</div>
                    <h3 class="process-title mb-3">Racontez votre rêve</h3>
                    <p class="process-description" id="recorder-instructions">
                        Cliquez sur <strong>"Démarrer"</strong> pour commencer l'enregistrement de votre récit.
                    </p>

                    <div id="recorder-ui" class="mt-4" data-upload-url="{% url 'dream_bridge_app:narrate' %}">
                        {% csrf_token %}
                        <button id="startButton" class="btn btn-dream">Démarrer l'enregistrement</button>
                        <button id="stopButton" class="btn btn-danger" disabled>Arrêter l'enregistrement</button>
                    </div>

                    <div id="status-display" class="mt-3" style="min-height: 24px;"></div>
                </div>  
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script src="{% static 'dream_bridge_app/recorder.js' %}" defer></script>
{% endblock %}
